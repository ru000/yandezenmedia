(function(a){var c=a._translations||{};var n=JSON.parse('{"c3f894c6":"Войдите, чтобы подписаться","886e1a84":"И читайте публикации этого источника на главной странице","8bc02ff4":"Войдите, чтобы оценить публикацию","7b0ac668":"Лента рекомендаций Дзена лучше, когда вы авторизованы","b461620b":"Не потеряйте свои подписки","01e89744":"Войдите, чтобы сохранить источник в раздел подписок","2b921a74":"Оценивания публикации, вы настраиваете вашу ленту","264e9b98":"Не потеряйте то, что вам понравилось","e3c656d5":"Понравившиеся публикации сохраняются в вашем профиле","c7ef96a4":"Войти"}')||{};for(var r in n){c[r]=n[r]}a._translations=c})(this);(window.webpackPublishersJsonp=window.webpackPublishersJsonp||[]).push([[63],{1301:function(e,i,o){"use strict";var t=o(3),n=o(1);Object.defineProperty(i,"__esModule",{value:!0}),i.SocialLoginPopupContainer=void 0;var l=n(o(2)),a=t(o(0)),c=o(18),u=o(7),s=o(50),r=o(35),p=o(36),d=o(127),b=o(132),g=o(4003),m=o(4010),P=o(183),k=o(4011);const f=(0,p.isOneOfZenKits)(),v=e=>`${P.socialLoginPopupStorageKey}_${e}`,I=e=>(0,s.getLocalStorage)().get(v(e)),C=e=>{(0,s.getLocalStorage)().delete(`${P.socialLoginPopupStorageKey}_${e}`)};i.SocialLoginPopupContainer=(e=>{const{isMobile:i}=e,o=(0,c.useDispatch)(),{publisher:t,isAuthorized:n,experiment:p,loginPopupData:_,publication:h,actionQuery:L,objectRecommenderIdQuery:y}=(0,c.useSelector)(e=>{const{experiments:i,profile:{user:o},publisher:{publisher:t},social:{loginPopupData:n},publication:l,url:{omittedQueryParams:a}}=e,c=n?n.action:null,u=a.socialLoginPopup,[s,r]=u?u.split("_"):[null,null];return{publisher:t,isAuthorized:Boolean(o),experiment:c===P.ActionsToPublication.subscribe?i.subscribeLoginPopupMessage:i.likeLoginPopupMessage,loginPopupData:n,publication:l,actionQuery:s,objectRecommenderIdQuery:r}},c.shallowEqual),{currentPublication:T,currentPublisher:S}=(0,a.useMemo)(()=>({currentPublication:h,currentPublisher:t}),[h,t]),w=(0,a.useCallback)(e=>{if(!T||!S||!_)return null;const{itemId:i}=_;return{place:"login_popup",item_type:"interface_element",item_id:i,parent_id:T.itemId,source_type:"publisher",source_id:S.itemId,event:e,publication_oid:T.id}},[T,S,_]),M=(0,a.useCallback)(()=>{if(!_)return;const{action:e,objectRecommenderId:i,objectId:t,pageTypeForLike:n,itemId:l,publicationId:a,publicationItemId:c}=_;(0,u.openAuthPage)({socialLoginPopup:`${e}_${i}`},"_blank"),o((0,d.closeLoginPopup)());const p=w("auth_click");p&&(0,r.sendStatEvent)(p),(({objectRecommenderId:e,objectId:i,action:o,pageTypeForLike:t,itemId:n,publicationId:l,publicationItemId:a})=>{(0,s.getLocalStorage)().set(v(e),{action:o,objectId:i,...t?{pageTypeForLike:t}:null,itemId:n,publicationId:l,publicationItemId:a},36e5)})({objectRecommenderId:i,objectId:t,action:e,pageTypeForLike:n,itemId:l,publicationId:a,publicationItemId:c})},[_,o,w]),A=(0,a.useCallback)(()=>{const e=w("login_suggest_show");e&&(0,r.sendStatEvent)(e)},[w]),j=(0,a.useCallback)(()=>{o((0,d.closeLoginPopup)());const e=w("login_suggest_close");e&&(0,r.sendStatEvent)(e)},[o,w]),O=(0,a.useMemo)(()=>{if(!T)return{pageType:"publishers_platform"};const e=I(T.itemId);return e&&e.pageTypeForLike?{pageType:e.pageTypeForLike}:{pageType:"publishers_platform"}},[T]),{toggleLike:x}=(0,m.useFeedbackPublication)(O),E=(0,a.useCallback)((e,i,t)=>{const n={publisherItemId:e,publicationId:i,publicationItemId:t,isSendZenKit:f};o((0,b.likePublisher)(n))},[o]);return(0,k.useSocialLoginPopupAction)({onSubscribeAction:E,onLikeAction:x,actionQuery:L,objectRecommenderIdQuery:y,getStorageValue:I,removeStorageValue:C,isAuthorized:n,currentPublisher:S,currentPublication:T}),!n&&p&&T?(0,l.default)(g.SocialLoginPopup,{loginPopupData:_,experiment:p,onClick:M,onPopupOpen:A,onPopupClose:j,isMobile:i,isPopupOpen:Boolean(_&&(T.publisherId===_.objectId||T.id===_.objectId))}):null})},4003:function(e,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"SocialLoginPopup",{enumerable:!0,get:function(){return t.SocialLoginPopup}});var t=o(4004)},4004:function(e,i,o){"use strict";var t=o(3),n=o(1);Object.defineProperty(i,"__esModule",{value:!0}),i.SocialLoginPopup=void 0;var l=n(o(2)),a=t(o(0)),c=o(4005),u=o(8),s=o(183);i.SocialLoginPopup=(({loginPopupData:e,experiment:i,onClick:o,onPopupClose:t,onPopupOpen:n,isMobile:r,isPopupOpen:p})=>{const d=e?e.action:null,{title:b,description:g}=(0,a.useMemo)(()=>{let e="",o="";switch(i){case s.SocialLoginPopupValueType.mainpage:d===s.ActionsToPublication.subscribe&&(e=(0,u.lang)('c3f894c6'),o=(0,u.lang)('886e1a84'));break;case s.SocialLoginPopupValueType.betterRecommendations:d===s.ActionsToPublication.subscribe?e=(0,u.lang)('c3f894c6'):d===s.ActionsToPublication.like&&(e=(0,u.lang)('8bc02ff4')),o=(0,u.lang)('7b0ac668');break;case s.SocialLoginPopupValueType.saveSource:d===s.ActionsToPublication.subscribe&&(e=(0,u.lang)('b461620b'),o=(0,u.lang)('01e89744'));break;case s.SocialLoginPopupValueType.tuneFeed:d===s.ActionsToPublication.like&&(e=(0,u.lang)('8bc02ff4'),o=(0,u.lang)('2b921a74'));break;case s.SocialLoginPopupValueType.saveInProfile:d===s.ActionsToPublication.like&&(e=(0,u.lang)('264e9b98'),o=(0,u.lang)('e3c656d5'))}return{title:e,description:o}},[i,d]),m=d===s.ActionsToPublication.subscribe?"channel":"cards";return(0,l.default)(c.LoginPopup,{isOpen:p,isMobile:r,viewType:m,titleText:b,descriptionText:g,buttonText:(0,u.lang)('c7ef96a4'),onClick:o,close:t,onOpen:n})})},4005:function(e,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=o(4006);Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(i,e,{enumerable:!0,get:function(){return t[e]}})})},4006:function(e,i,o){"use strict";var t=o(1);Object.defineProperty(i,"__esModule",{value:!0}),i.LoginPopup=i.LoginPopupContent=void 0;var n=t(o(2));o(4007);var l=t(o(0)),a=o(98),c=o(68),u=o(12),s=t(o(4009));const r=(0,u.bevis)("login-popup"),p=l.default.createElement(l.default.Fragment,null,(0,n.default)("div",{className:r("gray-card")}),(0,n.default)("div",{className:r("gray-card")}),(0,n.default)("div",{className:r("black-card")}),(0,n.default)("div",{className:r("star",{isBig:!0})}),(0,n.default)("div",{className:r("star")})),d=l.default.createElement(l.default.Fragment,null,(0,n.default)("div",{className:r("gray-channel")}),(0,n.default)("div",{className:r("star",{isBig:!0})}),(0,n.default)("div",{className:r("star")})),b=({viewType:e,titleText:i,descriptionText:o,buttonText:t,isMobile:a,onClick:u,containerRef:b})=>{const g="channel"===e?d:p;return l.default.createElement("div",{className:r({isMobile:a,viewType:e}),ref:b},(0,n.default)("div",{className:r("pics")},void 0,g),(0,n.default)("h1",{className:r("title")},void 0,i),(0,n.default)("p",{className:r("description")},void 0,o),(0,n.default)(c.Button,{size:"l",icon:s.default,viewType:"yellow",widthType:"wide",onClick:u,iconClass:r("button-icon")},void 0,t))};i.LoginPopupContent=b,i.LoginPopup=(e=>{const{isOpen:i,isMobile:o,close:t,onClick:l,titleText:c,buttonText:u,descriptionText:s,viewType:r="channel",onClose:p,onOpen:d}=e;return(0,n.default)(a.Modal,{isOpen:i,close:t,onClose:p,onOpen:d,isMobileMenu:o,viewType:"login-popup-fixed-thin",withVerticalAlign:!0},void 0,(0,n.default)(b,{isMobile:o,viewType:r,titleText:c,descriptionText:s,buttonText:u,onClick:l}))})},4007:function(e,i,o){},4009:function(e,i){e.exports="\"data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cg opacity='0.8'%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.0463 8.89712C11.6333 8.14245 12 7.08029 12 6C12 4.23229 10.5276 3 9 3C7.47236 3 6 4.23229 6 6C6 7.08029 6.36674 8.14245 6.9537 8.89712C7.52381 9.63011 8.22849 10 9 10C9.77151 10 10.4762 9.63011 11.0463 8.89712ZM9 12C12 12 14 9 14 6C14 3 11.5 1 9 1C6.5 1 4 3 4 6C4 9 6 12 9 12Z' fill='black'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M3.98398 17.1423C3.98953 17.1221 4 17.0727 4 17H2C2 16.7366 2.08482 16.4953 2.1541 16.3336C2.23429 16.1465 2.34521 15.9494 2.4825 15.7511C2.75823 15.3528 3.16504 14.9139 3.72114 14.5061C4.84448 13.6823 6.55578 13 9 13C11.4442 13 13.1555 13.6823 14.2789 14.5061C14.835 14.9139 15.2418 15.3528 15.5175 15.7511C15.6548 15.9494 15.7657 16.1465 15.8459 16.3336C15.9152 16.4953 16 16.7366 16 17H14C14 17.0727 14.0105 17.1221 14.016 17.1423C14.0142 17.1373 14.0114 17.1303 14.0076 17.1215C13.9882 17.0762 13.9468 16.9959 13.8731 16.8895C13.727 16.6784 13.4775 16.3986 13.0961 16.1189C12.3445 15.5677 11.0558 15 9 15C6.94422 15 5.65552 15.5677 4.90386 16.1189C4.52246 16.3986 4.27302 16.6784 4.12688 16.8895C4.05322 16.9959 4.0118 17.0762 3.99239 17.1215C3.98858 17.1303 3.98585 17.1373 3.98398 17.1423Z' fill='black'/%3E %3C/g%3E %3C/svg%3E\""},4010:function(e,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useFeedbackPublication=void 0;var t=o(0),n=o(18),l=o(289),a=o(127),c=o(234),u=o(10),s=o(35),r=o(145),p=o(29),d=o(183);i.useFeedbackPublication=(e=>{const{feedback:i,publication:o,isLikedByUser:b,totalLikesCount:g,experiments:m,profile:P,shareUrl:k}=(0,r.useFeedbackDataSelector)(),f=(0,n.useDispatch)(),v=(0,t.useMemo)(()=>{const{useNewViewInSocials:e}=m,{likes:t}=i,{itemId:n}=o,l=t.includes(n);return e?l||b:l},[m,i,o,b]),I=(0,t.useMemo)(()=>{const{dislikes:e}=i,{itemId:t}=o;return!v&&e.includes(t)},[i,o,v]),C=(0,t.useCallback)(i=>{const{socialsApp:o}=e;return!(!o||!o.likePublication)&&((0,c.updateLikesCount)(g+1,!0)(f),o.likePublication(i))},[f,e,g]),_=(0,t.useCallback)(()=>{const{socialsApp:i}=e;if(i&&i.cancelLikePublication){const e=g>0?g-1:0;v&&(0,c.updateLikesCount)(e,!1)(f),i.cancelLikePublication()}},[f,e,v,g]);return{toggleLike:(0,t.useCallback)((i=p.LikePlace.other)=>{const{pageType:t}=e,{likeLoginPopupMessage:n}=m,{user:c}=P,u=Boolean(n&&!c),b=(0,r.getFeedbackEventData)(o,k);return v?(f((0,l.undoLikePublication)(b,t)),_(),!1):u?((0,a.openLoginPopup)({action:d.ActionsToPublication.like,objectRecommenderId:o.itemId,objectId:o.id,itemId:s.InterfaceElementToBulkItemIdMap.likeMitten,publicationId:o.id,publicationItemId:o.itemId}),!0):(f((0,l.likePublication)(b,I,t)),C(i))},[f,e,m,v,I,P,o,k,C,_]),toggleDislike:(0,t.useCallback)(()=>{const{pageType:i}=e,t=(0,r.getFeedbackEventData)(o,k);I?(0,l.undoDislikePublication)(t,i):((0,l.dislikePublication)(t,v,i),_())},[e,v,I,o,k,_]),openLikersPopup:(0,t.useCallback)(()=>{const{socialsApp:i}=e,{useNewViewInSocials:o}=m;o&&i&&i.openPublicationLikersPopup()},[e,m]),scrollToCommentsBlock:(0,t.useCallback)((i=!1)=>{const{commentsBlock:o}=e;if(!u.isSSR&&o){const e=o.getBoundingClientRect().top+window.pageYOffset-60;window.scrollTo({top:e,behavior:i?"smooth":"auto"})}},[e])}})},4011:function(e,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useSocialLoginPopupAction=void 0;var t=o(0),n=o(132),l=o(183),a=o(54);i.useSocialLoginPopupAction=(({onSubscribeAction:e,onLikeAction:i,actionQuery:o,objectRecommenderIdQuery:c,getStorageValue:u,removeStorageValue:s,isAuthorized:r,currentPublisher:p,currentPublication:d})=>{(0,t.useEffect)(()=>{if(!c||!r)return;const t=u(c);if(!t)return;const{action:b}=t;o===b&&(o===l.ActionsToPublication.subscribe&&p&&c===p.itemId?(e(p.itemId,d&&d.id||"",d&&d.itemId||""),s(c)):o===l.ActionsToPublication.like&&d&&c===d.itemId?(i(),s(c)):(0,a.fireOnLoadInMobileOrNow)(()=>{const e=u(c);if(!e)return;const{publicationId:i,publicationItemId:o,action:t}=e;t===l.ActionsToPublication.subscribe&&(0,n.sendLikePublisher)({publisherItemId:c,publicationId:i,publicationItemId:o}),s(c)}))},[e,i,p,d,r,u,s,o,c])})}}]);